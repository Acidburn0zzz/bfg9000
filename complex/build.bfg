# -*- python -*-

#test_dirs = [...]
#tests = [...]




libmettle = library('mettle', files=['libmettle.cpp'])
mettle = executable('mettle', libs=[libmettle], files=['mettle.cpp'])

all_tests = ['test_foo', 'test_bar']

tests = target('tests', [executable(i, files=[i+'.cpp']) for i in all_tests])

target('all', [mettle, libmettle])
command('test', deps=[mettle, tests], cmd=['./mettle ' + ' '.join(all_tests)])
